# 实现计划

- [x] 1. 创建项目基础结构和核心接口

  - 创建 CMakeLists.txt 或.pro 文件配置 Qt5 项目
  - 设置项目目录结构（src/, include/, resources/）
  - 定义核心数据结构和接口类
  - _需求: 1.1, 2.1, 3.1, 4.1_

- [x] 2. 实现自定义按钮组件

  - 创建 CustomButton 类，继承自 QPushButton
  - 实现选中状态管理和视觉反馈
  - 添加悬停效果和点击动画
  - 编写 CustomButton 的单元测试
  - _需求: 4.3, 4.4_

- [x] 3. 实现时间控件组件
- [x] 3.1 创建 TimeWidget 基础结构

  - 实现 TimeWidget 类的基本框架
  - 创建时间颗粒度按钮组（15 分钟、1 小时、1 天）
  - 实现时间范围选择的日期时间编辑器
  - _需求: 1.1, 1.2_

- [x] 3.2 实现时间快捷选择功能

  - 添加"前一天"和"前三天"快捷按钮
  - 实现快捷按钮的时间范围自动设置逻辑
  - 添加时间验证机制（结束时间不能早于开始时间）
  - _需求: 1.3, 1.4, 1.5_

- [x] 3.3 完善时间控件的信号槽机制

  - 实现时间范围变化的信号发射
  - 连接各个时间控件的槽函数
  - 编写时间控件的单元测试
  - _需求: 1.1, 1.2, 1.3_

- [x] 4. 实现设备数据管理
- [x] 4.1 创建设备数据模型

  - 定义 DeviceInfo 结构体和相关数据类型
  - 实现 DeviceManager 单例类
  - 创建设备数据的加载和管理逻辑
  - _需求: 2.1, 2.2_

- [x] 4.2 实现设备树形数据结构

  - 使用 QStandardItemModel 构建设备树
  - 实现设备类型的分层显示
  - 添加设备复选框状态管理
  - _需求: 2.1, 2.2, 2.3_

- [x] 5. 实现设备选择控件
- [x] 5.1 创建 DeviceWidget 基础界面

  - 实现设备类型标签页（全部模型、根模型等）
  - 创建设备树形视图组件
  - 添加搜索输入框和已选计数显示
  - _需求: 2.1, 2.5_

- [x] 5.2 实现设备搜索功能

  - 实现关键字搜索的实时过滤逻辑
  - 保持搜索结果的层级结构显示
  - 添加无匹配结果的提示信息
  - _需求: 3.1, 3.2, 3.3, 3.4, 3.5_

- [x] 5.3 实现设备选择状态管理

  - 实现单个设备的选择/取消选择
  - 添加"全部"复选框的全选/取消全选功能
  - 实时更新已选设备数量显示
  - 发射设备选择变化信号
  - _需求: 2.3, 2.4, 2.5_

- [x] 6. 实现主窗口集成
- [x] 6.1 创建 MainWindow 主框架

  - 实现 MainWindow 类继承自 QMainWindow
  - 设置主窗口的基本属性和布局
  - 集成 TimeWidget 和 DeviceWidget 组件
  - _需求: 4.1, 4.2_

- [x] 6.2 实现组件间通信

  - 连接 TimeWidget 的时间变化信号到主窗口
  - 连接 DeviceWidget 的选择变化信号到主窗口
  - 实现组件间的数据同步机制
  - _需求: 1.1, 2.3, 3.1_

- [x] 7. 实现界面样式和主题
- [x] 7.1 创建 QSS 样式文件

  - 定义深蓝色主题的颜色变量
  - 实现主窗口和各组件的样式定义
  - 添加按钮悬停和选中状态样式
  - _需求: 4.1, 4.3_

- [x] 7.2 实现响应式布局

  - 使用 Qt 布局管理器实现自适应布局
  - 确保界面在不同窗口大小下的正确显示
  - 优化控件间距和对齐方式
  - _需求: 4.2, 4.5_

- [x] 8. 实现错误处理和用户反馈

  - 添加时间验证的错误提示机制
  - 实现设备数据加载失败的处理
  - 添加用户操作的状态反馈
  - _需求: 1.5, 3.5_

- [x] 9. 编写综合测试
- [x] 9.1 实现单元测试套件

  - 为 TimeWidget 编写时间计算逻辑测试
  - 为 DeviceWidget 编写搜索和筛选测试
  - 为 CustomButton 编写状态管理测试
  - _需求: 1.1, 2.3, 3.1_

- [x] 9.2 实现集成测试

  - 测试主窗口组件间的交互功能
  - 验证时间选择与设备筛选的联动
  - 测试搜索功能的端到端流程
  - _需求: 1.1, 2.1, 3.1_

- [x] 10. 完善应用程序入口和配置
  - 创建 main.cpp 应用程序入口点
  - 设置应用程序图标和基本信息
  - 添加必要的资源文件和配置
  - 编写项目构建和运行文档
  - _需求: 4.1, 4.4_
